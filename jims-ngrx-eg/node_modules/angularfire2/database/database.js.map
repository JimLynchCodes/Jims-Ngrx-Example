{"version":3,"file":"database.js","sourceRoot":"","sources":["../../src/database/database.ts"],"names":[],"mappings":";;;;;OACO,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,eAAe;OAC3C,EAAE,WAAW,EAAE,cAAc,EAAE,MAAM,WAAW;OAEhD,EAAE,mBAAmB,EAAE,MAAM,SAAS;OAEtC,KAAK,KAAK,MAAM,UAAU;OAC1B,EAGL,qBAAqB,EACtB,MAAM,SAAS;AAGhB;IACE,6BAAqB,QAA0B,EACpC,KAAS;QADC,aAAQ,GAAR,QAAQ,CAAkB;QACpC,UAAK,GAAL,KAAK,CAAI;IAAG,CAAC;IACxB,kCAAI,GAAJ,UAAM,QAA6C,EAAE,IAA6B;QAAlF,iBAKC;QAJC,MAAM,CAAC,KAAK,CAAC,wBAAwB,CAAC,QAAQ,EAAE;YAC9C,KAAK,EAAE,cAAM,OAAA,mBAAmB,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,KAAI,CAAC,QAAQ,EAAU,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,EAAvG,CAAuG;YACpH,KAAK,EAAE,cAAM,OAAA,mBAAmB,CAA8B,QAAQ,CAAC,EAA1D,CAA0D;SACxE,CAAC,CAAC;IACL,CAAC;IACD,oCAAM,GAAN,UAAO,QAA8C,EAAE,IAA+B;QAAtF,iBAKC;QAJC,MAAM,CAAC,KAAK,CAAC,wBAAwB,CAAC,QAAQ,EAAE;YAC9C,KAAK,EAAE,cAAM,OAAA,qBAAqB,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,KAAI,CAAC,QAAQ,EAAU,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,EAAzG,CAAyG;YACtH,KAAK,EAAE,cAAM,OAAA,qBAAqB,CAAC,QAAQ,CAAC,EAA/B,CAA+B;SAC7C,CAAC,CAAC;IACL,CAAC;IACI,8BAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,UAAU,EAAE;KACnB,CAAC;IAEK,kCAAc,GAA6D;QAClF,EAAC,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,cAAc,EAAG,EAAE,EAAG,EAAC;QAC7E,EAAC,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,WAAW,EAAG,EAAE,EAAG,EAAC;KACzE,CAAC;IACF,0BAAC;AAAD,CAAC,AAvBD,IAuBC;AAGD;IAAsC,oCAAmB;IAAzD;QAAsC,8BAAmB;IAAE,CAAC;IAAD,uBAAC;AAAD,CAAC,AAA5D,CAAsC,mBAAmB,GAAG;AAE5D,mBAAoB,IAAsB,EAAE,GAAU;IACpD,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAGlC,GAAG,GAAG,IAAI,CAAC,WAAW,GAAG,GAAG,GAAG,KAAK,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;IAC9D,CAAC;IACD,MAAM,CAAC,GAAG,CAAC;AACb,CAAC","sourcesContent":["import * as firebase from 'firebase';\nimport { Inject, Injectable } from '@angular/core';\nimport { FirebaseApp, FirebaseConfig } from '../tokens';\nimport { FirebaseAppConfig } from '../angularfire2';\nimport { FirebaseListFactory } from './index';\nimport { FirebaseListFactoryOpts, FirebaseObjectFactoryOpts } from '../interfaces';\nimport * as utils from '../utils';\nimport {\n  FirebaseListObservable,\n  FirebaseObjectObservable,\n  FirebaseObjectFactory\n} from './index';\n\n\nexport class AngularFireDatabase {\n  constructor( private fbConfig:FirebaseAppConfig,\n     private fbApp:any) {}\n  list (urlOrRef:string | firebase.database.Reference, opts?:FirebaseListFactoryOpts):FirebaseListObservable<any[]> {\n    return utils.checkForUrlOrFirebaseRef(urlOrRef, {\n      isUrl: () => FirebaseListFactory(this.fbApp.database().refFromURL(getAbsUrl(this.fbConfig, <string>urlOrRef)), opts),\n      isRef: () => FirebaseListFactory(<firebase.database.Reference>urlOrRef)\n    });\n  }\n  object(urlOrRef: string | firebase.database.Reference, opts?:FirebaseObjectFactoryOpts):FirebaseObjectObservable<any> {\n    return utils.checkForUrlOrFirebaseRef(urlOrRef, {\n      isUrl: () => FirebaseObjectFactory(this.fbApp.database().refFromURL(getAbsUrl(this.fbConfig, <string>urlOrRef)), opts),\n      isRef: () => FirebaseObjectFactory(urlOrRef)\n    });\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: ({type: any, decorators?: DecoratorInvocation[]}|null)[] = [\n{type: undefined, decorators: [{ type: Inject, args: [FirebaseConfig, ] }, ]},\n{type: undefined, decorators: [{ type: Inject, args: [FirebaseApp, ] }, ]},\n];\n}\n\n// TODO: Deprecate\nexport class FirebaseDatabase extends AngularFireDatabase {}\n\nfunction getAbsUrl (root:FirebaseAppConfig, url:string) {\n  if (!(/^[a-z]+:\\/\\/.*/.test(url))) {\n    // Provided url is relative.\n    // Strip any leading slash\n    url = root.databaseURL + '/' + utils.stripLeadingSlash(url);\n  }\n  return url;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}